### 地址空间定义

**物理地址空间 -- 硬件支持的地址空间**

起始地址 0，直到 MAX~sys~

**逻辑地址空间 -- 在 CPU 运行的进程看到的地址**

起始地址 0，直到 MAX~prog~

### 地址生成过程

![](img/操作系统 -- 第五讲 物理内存管理 连续内存分配-1.png)

### 连续内存分配和内存碎片

![](img/操作系统 -- 第五讲 物理内存管理 连续内存分配-8.png)

### 最先匹配策略

![](img/操作系统 -- 第五讲 物理内存管理 连续内存分配-2.png)

![](img/操作系统 -- 第五讲 物理内存管理 连续内存分配-3.png)

### 最佳匹配策略

![](img/操作系统 -- 第五讲 物理内存管理 连续内存分配-4.png)

![](img/操作系统 -- 第五讲 物理内存管理 连续内存分配-5.png)

### 最差匹配策略

![](img/操作系统 -- 第五讲 物理内存管理 连续内存分配-6.png)

![](img/操作系统 -- 第五讲 物理内存管理 连续内存分配-7.png)

### 碎片整理：紧凑

![](img/操作系统 -- 第五讲 物理内存管理 连续内存分配-9.png)

### 碎片整理：分区对换

![](img/操作系统 -- 第五讲 物理内存管理 连续内存分配-10.png)

### 伙伴系统

![](img/操作系统 -- 第五讲 物理内存管理 连续内存分配-11.png)

### 伙伴系统的实现

![](img/操作系统 -- 第五讲 物理内存管理 连续内存分配-12.png)

![](img/操作系统 -- 第五讲 物理内存管理 连续内存分配-14.png)

### 伙伴系统中的内存分配

![](img/操作系统 -- 第五讲 物理内存管理 连续内存分配-13.png)

### ucore 中的物理内存管理

![](img/操作系统 -- 第五讲 物理内存管理 连续内存分配-15.png)

### ucore 中的伙伴系统实现

![](img/操作系统 -- 第五讲 物理内存管理 连续内存分配-16.png)