## 正则表达式

<img src="img/第3讲 词法分析-1.png" />

### 正则表达式的定义

<img src="img/第3讲 词法分析-2.png" />

<img src="img/第3讲 词法分析-3.png" />

### 正则语言

- 可以用 RE 的语言叫做

    **正则语言**（regular language）或**正则集合**（regular set）

<img src="img/第3讲 词法分析-4.png" />

### 正则文法与正则表达式等价

- 对任何正则文法 **G**，存在定义同一语言的正则表达式 **r**
- 对任何正则表达式 **r**，存在生成同一语言的正则文法 **G**

## 正则定义

<img src="img/第3讲 词法分析-5.png" />

## 有穷自动机

<img src="img/第3讲 词法分析-6.png" />

<img src="img/第3讲 词法分析-7.png" />

### FA 的表示

<img src="img/第3讲 词法分析-8.png" />

### FA 定义（接收）的语言

<img src="img/第3讲 词法分析-9.png" />

### 最长字串匹配原则

<img src="img/第3讲 词法分析-10.png" />

## 有穷自动机的分类

### 确定的有穷自动机（DFA）

<img src="img/第3讲 词法分析-11.png" />

<img src="img/第3讲 词法分析-12.png" />

### 非确定的有穷自动机（NFA）

<img src="img/第3讲 词法分析-13.png" />

<img src="img/第3讲 词法分析-14.png" />

### DFA 和 NFA 的等价性

- 对任何 **NFA N**，存在识别同意语言的 **DFA D**
- 对任何 **DFA D**，存在识别同一语言的 **NFA N**

### 带有和不带有 ”ε-边“ 的 NFA 的等价性

<img src="img/第3讲 词法分析-15.png" />

状态 A 可以看作有 0 个 1 和 0 个 2

状态 B 可以看作有 0 个 2

### DFA 的算法实现

<img src="img/第3讲 词法分析-16.png" />

## 从正则表达式到有穷自动机

### 根据 RE 构造 NFA

<img src="img/第3讲 词法分析-17.png" />

<img src="img/第3讲 词法分析-18.png" />

<img src="img/第3讲 词法分析-19.png" />

## 从 NFA 到 DFA 的转换

<img src="img/第3讲 词法分析-20.png" />

### 从带有ε-边的 NFA 到 DFA 的转换

<img src="img/第3讲 词法分析-21.png" />

### 子集构造法

<img src="img/第3讲 词法分析-22.png" />

### 计算 ε-closure（T）

<img src="img/第3讲 词法分析-23.png" />

## 识别单词的 DFA

### 识别标识符的 DFA

<img src="img/第3讲 词法分析-24.png" />

### 识别无符号数的 DFA

<img src="img/第3讲 词法分析-25.png" />

<img src="img/第3讲 词法分析-26.png" />

### 识别各进制无符号整数的 DFA

<img src="img/第3讲 词法分析-27.png" />

### 识别注释的 DFA

<img src="img/第3讲 词法分析-28.png" />

### 识别 Token 的 DFA

<img src="img/第3讲 词法分析-29.png" />

### 词法分析阶段的错误处理

- 词法分析阶段可检测错误的类型
    - 单词拼写错误
        - 例：int i = <font color='red'>0x3G</font>; float j = <font color='red'>1.05e</font>;
    - 非法字符
        - 例：\~@
- 词法错误检测
    - 如果当前状态与当前输入符号在转换表对应项中的信息为空，则报错，调用错误处理程序

### 错误处理

- 查找已扫描字符串中最后一个对应于某终态的字符

    - 如果找到了，将该字符与其前面的字符识别成一个单词。

        然后将输入指针退回到该字符，扫描器重新回到初始状态，继续识别下一个单词

    - 如果没找到，测确定出错，采用错误恢复策略

###  错误恢复策略

- 最简单的错误恢复策略：”<font color='red'>恐慌模式</font>（panic mode）“ 恢复
    - 从剩余的输入中不断删除字符，直到词法分析器能够在剩余输入的开头发现一个正确的字符为止